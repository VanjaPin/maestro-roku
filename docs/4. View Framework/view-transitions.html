<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        View Transitions
    </title>
    <link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@10.7.2/styles/github.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
    <link rel="stylesheet" href="../style.css" />
</head>

<body>
    <div id="navbar">
        <a href="/index.html">
            <div>Maestro - development framework for roku applications</div>
        </a>
        <a href="https://github.com/georgejecook/maestro-roku" target="_blank" title="View project on GitHub">
            <svg xmlns="http://www.w3.org/2000/svg" style="fill: white" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
        </a>
    </div>
    <div id="body-area">
        <div id="sidebar">

            
                
                    <div class="folder">
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../index.html">Maestro-roku</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../1. About">1. About</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../1. About/index.html">Overview</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../1. About/start.html">Getting started</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../1. About/bsc-plugin.html">Bsc plugin</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../1. About/justification.html">Justification</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../2. Utils">2. Utils</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../2. Utils/index.html">Overview</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../2. Utils/mc.html">mc (maestro core utils)</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../2. Utils/mc.tasks.html">mc.tasks (maestro task utils)</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../2. Utils/mc.utils.Serialization.html">mc.utils.Serialization</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../2. Utils/mc.utils.Collections.html">mc.utils.Collections</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../3. Node Classes">3. Node Classes</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../3. Node Classes/index.html">Overview</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../3. Node Classes/testing.html">Testing</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../3. Node Classes/config.html">Config</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../3. Node Classes/how-to-write.html">How to write</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../3. Node Classes/implemenation.html">Implementation details</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../3. Node Classes/node-task.html">Node tasks</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="">4. View Framework</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="index.html">Overview</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="base-screen.html">BaseScreen</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="base-view.html">BaseView</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="aggregate-views.html">Aggregate Views</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="view-transitions.html">View Transitions</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="component-lifecycle.html">Component lifecycle</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="mixins.html">Mixins</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../5. MVVM Framework">5. MVVM Framework</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../5. MVVM Framework/index.html">Overview</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../5. MVVM Framework/observables-and-vms.html">Observables and Viewmodels</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../5. MVVM Framework/xml-bindings.html">XML binding syntax</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../6. IOC Framework">6. IOC Framework</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../6. IOC Framework/index.html">Overview</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../7. More maestro goodness">7. More maestro goodness</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../7. More maestro goodness/index.html">Overview</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../8. List Component">8. List Component</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../8. List Component/sample.html">Sample</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../8. List Component/getting-started.html">Getting Started</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../8. List Component/index.html">Overview</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../9. Debugging">9. Debugging</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../9. Debugging/index.html">Debugging</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                    </div>
                
            

            
                </br>
                </br>
                </br>
                </br>

              Docs by <a href='https://github.com/TwitchBronBron/statigen'>statigen</a>

        </div>
        <div id="content">
            <a href="#overview"><h1 id="overview">Overview</h1></a><p>Similar to iOS transitions, maestro <em>aggregate views</em> (i.e <code>TabController</code>, <code>NavController</code>, <code>DynamicController</code>), allow developers to have direct control over how views transition to one another.</p>
<p>The mechanism for this is the <code>BaseTransition</code> class, which is extended by NodeClasses, to easily create transitions.</p>
<a href="#use"><h2 id="use">Use</h2></a><p>To use a transition, simply set the <code>transition</code> property of a <code>BaseAggregateView</code> to an instance of a transition. The next time the view&#39;s change, maestro will use that object to manage the transition.</p>
<a href="#built-in-transitions"><h2 id="built-in-transitions">Built in transitions</h2></a><p>There are 2 out-of-the-box transitions one can use:</p>
<ul>
<li>SimpleTransition - replaces the previous view with the new view. All <code>BaseAggregateView</code> sub classes use this by default</li>
<li>FadeTransition - Fades between 2 views, using a given color as the cross fade, with the following properties:<ul>
<li><code>duration</code>  - controls the duration of the cross fade</li>
<li><code>size</code> - controls the size of the fade rectangle</li>
<li><code>color</code> - controls the color of the fade rectangle</li>
</ul>
</li>
</ul>
<a href="#order-of-events"><h2 id="order-of-events">Order of events</h2></a><p>For child views (i.e. those being managed by the transition), the order of events is:</p>
<ul>
<li><code>initialize</code> - invoked on <code>targetView</code>, if not already initialized</li>
<li><code>onAddedToAggregateView</code> - invoked on <code>targetView</code></li>
<li><code>onFirstShow</code> - invoked on <code>targetView</code></li>
<li><code>onShow</code> - invoked on <code>targetView</code></li>
<li><code>onHide</code> - invoked on <code>sourceView</code> (the old view)</li>
<li><code>onGainedFocus</code> - invoked on <code>targetView</code> if the owners <code>isAutoFocusEnabled</code> is set to true, and it currently has focus</li>
<li><code>onLostFocus</code> - invoked on <code>sourceView</code> if it had focus and lost it</li>
<li><code>onRemovedFromAggregateView</code> - invoked on <code>sourceView</code> (the old view)</li>
</ul>
<a href="#custom-transitions"><h2 id="custom-transitions">Custom transitions</h2></a><p>The <code>BaseTransition</code> manages the showing and hiding of aggregate container views. It has the following properties:
    - <code>progress</code> - the current transition progress from 0 to 1
    - <code>source</code> - the source view (currently shown in the aggregate view)
    - <code>target</code> - the new view to show
    - <code>owner</code> - the aggregate view (e.g. <code>TabController</code> / <code>DynamicContainer</code>)</p>
<p>One is intended to override the <code>begin</code> function, which will:</p>
<ul>
<li> Manage the animation of the transition</li>
<li> Manage the hiding of the current view</li>
<li> Manage the showing of the new view</li>
<li> Manage any other chrome, etc</li>
<li> Call <code>m.finish</code>, when the animation is finished, so that the <code>BaseTransition</code> can ensure all the necessary hooks are invoked</li>
</ul>
<a href="#to-create-a-custom-transition"><h3 id="to-create-a-custom-transition">To create a custom transition</h3></a><ol>
<li>Create a new <em>NodeClass</em> that extends <code>mv.transitions.BaseTransition</code></li>
<li>Add fields as necessary</li>
<li>Call super on the constructor with your transition name (this set&#39;s the loggers name)</li>
<li>Override <code>begin</code> method</li>
<li>Call <code>m.finish</code>, when the transition is finished</li>
</ol>
<a href="#example"><h3 id="example">Example</h3></a><pre><code>import &quot;pkg:/source/view/NodeClass.bs&quot;
import &quot;pkg:/source/view/Animation.bs&quot;
import &quot;pkg:/source/core/Utils.bs&quot;
import &quot;pkg:/source/view/transitions/BaseTransition.bs&quot;

namespace mv.transitions
  &#39; /**
  &#39;  * @module BaseTransition
  &#39;  * @description BaseTransition component. extend this to create other transitions
  &#39;  */
  @node(&quot;mv_FadeTransition&quot;, &quot;Group&quot;)
  class FadeTransition extends mv.transitions.BaseTransition

    public color as string

    public size = [1920, 1080]

    public duration = 2

    private fadeRectangle
    private blackFadeAnim


    function new()
      super(&quot;mv_FadeTransition&quot;)
    end function

    protected override function begin()
      if m.fadeRectangle = invalid
        m.fadeRectangle = mc.createSGNode(&quot;mv_Rectangle&quot;, m.owner, &quot;fadeRectangle&quot;)
        m.blackFadeAnim = mv.animations.utils.fadeTo(m.fadeRectangle, duration, 1, false)
        m.blackFadeAnim.setKeys([0, 0.5, 1.0], [0.0, 1.0, 0.0])
      end if

      m.blackFadeAnim.onFraction(0.5, function(f)
        if m.source &lt;&gt; invalid and not m.source.isSameNode(m.target)
          m.source.visible = false
          m.owner.removeChild(m.source)
        end if
        m.owner.appendChild(view)
        if m.owner.isShown
          view.visible = true
        end if

      end function, m)

      m.blackFadeAnim.onFraction(1, function(f)
        m.finish()
      end function, m)

      m.fadeRectangle.size = m.top.size
      m.fadeRectangle.color = m.top.color

      m.blackFadeAnim.start()
    end function

  end class
end namespace
</code></pre>
            <div id="footer">
            </div>
        </div>
    </div>
    <script>hljs.highlightAll();</script>
</body>

</html>
