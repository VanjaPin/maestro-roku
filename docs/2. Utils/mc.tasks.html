<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        mc.tasks (maestro task utils)
    </title>
    <link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@10.7.2/styles/github.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
    <link rel="stylesheet" href="../style.css" />
</head>

<body>
    <div id="navbar">
        <a href="/index.html">
            <div>Maestro - development framework for roku applications</div>
        </a>
        <a href="https://github.com/georgejecook/maestro-roku" target="_blank" title="View project on GitHub">
            <svg xmlns="http://www.w3.org/2000/svg" style="fill: white" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
        </a>
    </div>
    <div id="body-area">
        <div id="sidebar">

            
                
                    <div class="folder">
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../index.html">Maestro-roku</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../1. About">1. About</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../1. About/index.html">Overview</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../1. About/start.html">Getting started</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../1. About/bsc-plugin.html">Bsc plugin</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../1. About/justification.html">Justification</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="">2. Utils</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="index.html">Overview</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="mc.html">mc (maestro core utils)</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="mc.tasks.html">mc.tasks (maestro task utils)</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="mc.utils.Serialization.html">mc.utils.Serialization</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="mc.utils.Collections.html">mc.utils.Collections</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../3. Node Classes">3. Node Classes</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../3. Node Classes/index.html">Overview</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../3. Node Classes/testing.html">Testing</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../3. Node Classes/config.html">Config</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../3. Node Classes/how-to-write.html">How to write</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../3. Node Classes/implemenation.html">Implementation details</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../3. Node Classes/node-task.html">Node tasks</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../4. View Framework">4. View Framework</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../4. View Framework/index.html">Overview</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../4. View Framework/base-screen.html">BaseScreen</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../4. View Framework/base-view.html">BaseView</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../4. View Framework/aggregate-views.html">Aggregate Views</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../4. View Framework/view-transitions.html">View Transitions</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../4. View Framework/component-lifecycle.html">Component lifecycle</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../4. View Framework/mixins.html">Mixins</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../5. MVVM Framework">5. MVVM Framework</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../5. MVVM Framework/index.html">Overview</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../5. MVVM Framework/observables-and-vms.html">Observables and Viewmodels</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../5. MVVM Framework/xml-bindings.html">XML binding syntax</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../6. IOC Framework">6. IOC Framework</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../6. IOC Framework/index.html">Overview</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../7. More maestro goodness">7. More maestro goodness</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../7. More maestro goodness/index.html">Overview</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../8. List Component">8. List Component</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../8. List Component/sample.html">Sample</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../8. List Component/getting-started.html">Getting Started</a>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../8. List Component/index.html">Overview</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                            <div class="children">
                                
                
                    <div class="folder">
                        
                            <a class="name entry" href="../9. Debugging">9. Debugging</a>
                        
                        
                            <div class="children">
                                
                
                    <a class="entry" href="../9. Debugging/index.html">Debugging</a>
                
            
                            </div>
                        
                    </div>
                
            
                            </div>
                        
                    </div>
                
            

            
                </br>
                </br>
                </br>
                </br>

              Docs by <a href='https://github.com/TwitchBronBron/statigen'>statigen</a>

        </div>
        <div id="content">
            <a href="#overview"><h1 id="overview">Overview</h1></a><p>To save on boilerplate code, and improve navigatability in the ide, maestro provides wrappers that allow for easy creation of observers, which take function pointers, instead of strings, and will automatically call back with the node, value, node and value, or nothing, depending the <code>sendMode</code></p>
<a href="#delaying-execution"><h3 id="delaying-execution">Delaying execution</h3></a><ul>
<li><code>waitAFrame(callback, duration = 0.01, sendMode = &quot;none&quot;, scope = invalid)</code> - returns a wait timer, and will invoke callback when the timer completes</li>
<li><code>cancelWaitTimer(timer)</code> - cancel a previously set wait timer</li>
</ul>
<a href="#tasks"><h2 id="tasks">Tasks</h2></a><ul>
<li><code>createTask(taskType, fields, callback = invalid, isRunning = true, sendMode = &quot;value&quot;, scope = invalid, fieldName = &quot;output&quot;)</code> - create a task, set the fields, run and wire up the callback</li>
<li><code>cancelTask(task)</code> - cancel a task created with <code>createTask</code></li>
</ul>
<a href="#observers"><h2 id="observers">Observers</h2></a><ul>
<li><code>observeNodeField(node, fieldName, callback, sendMode = &quot;value&quot;, once = false, scope = invalid)</code> - observes the field, and wires up the callback</li>
<li><code>unobserveNodeField(node, fieldName, callback, scope = invalid)</code> - unobserve an observed field</li>
<li><code>cleanNodeObserver(node, fieldName)</code> - clean node observes</li>
<li><code>cleanScope()</code> - clean the entire scope (used internally)</li>
</ul>
<a href="#value-observing"><h2 id="value-observing">Value Observing</h2></a><p>Many times we want to observe a specific value on an observer, to achieve this we use the <code>ValueObserver</code> utility class. This class allows us to execute code, when a certain value comparator condition is met. A value comparator can be:</p>
<ul>
<li><code>=</code> value is the same</li>
<li><code>&gt;</code> value is greater</li>
<li><code>&gt;=</code> value is greater or equal</li>
<li><code>&lt;</code> value is less</li>
<li><code>&lt;=</code> value is less or equal</li>
<li><code>&lt;&gt;</code> value is not equal</li>
</ul>
<p>The ValueObserver takes a constructor of:</p>
<ul>
<li>target - node to observe</li>
<li>fieldName</li>
<li>scope - the m of whatever functions will be called on</li>
</ul>
<p>To add observers, invoke <code>onValue</code>, with the target value, callback function and comparator:</p>
<p>e.g.</p>
<pre><code>    function onFraction(fraction, func, scope)
      if m.fractionValueObserver = invalid
        m.fractionValueObserver = new mc.tasks.ValueObserver(m.interpolator, &quot;fraction&quot;, scope)
      end if
      m.fractionValueObserver.onValue(fraction, func, &quot;&gt;=&quot;)
    end function
</code></pre>
<a href="#delayed-tasks"><h2 id="delayed-tasks">Delayed tasks</h2></a><p>As a convenience, you can create a <code>DelayedTaskManager</code> which makes it trivial to do things like schedule a refresh token task.</p>
<p>Use the functions</p>
<ul>
<li><code>scheduleDelayedTask(nodeType, id, delay, fields, resultField = &quot;output&quot;)</code> - schedule a task to execute after delay seconds</li>
<li><code>cancelDelayedTaskWithId(id)</code> - cancel a previously scheduled task</li>
</ul>
<a href="#"><h3 id=""></h3></a><p>Example use:</p>
<p>In your ioc setup:</p>
<pre><code>      delayedTaskManager = m.createSGNode(&quot;mc_delayedTaskManager&quot;, invalid, &quot;delayedTaskManager&quot;)
      m.setInstance(&quot;delayedTaskManager&quot;, delayedTaskManager)
</code></pre>
<p>Then, when scheduling refreshing an auth token, with an <code>AuthTask</code>, something like:</p>
<pre><code>    @inject(&quot;delayedTaskManager&quot;)
    private delayedTaskManager as mc.types.node

    protected function setRefreshTimer()
      delayedTaskManager@.scheduleDelayedTask(&quot;AuthTask&quot;, &quot;refreshTask&quot;, 300, { &quot;command&quot;: &quot;refresh&quot; })
    end function
</code></pre>
            <div id="footer">
            </div>
        </div>
    </div>
    <script>hljs.highlightAll();</script>
</body>

</html>
